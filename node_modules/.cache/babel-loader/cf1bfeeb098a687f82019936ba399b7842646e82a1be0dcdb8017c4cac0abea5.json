{"ast":null,"code":"var _jsxFileName = \"/Users/naamasharir/Documents/personal/TLV500ModelAssistant/TLV500-modelAssistant/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Box, Drawer, Typography, List, ListItem, ListItemText, ListItemIcon, Paper, TextField, Button, Avatar, Divider, Chip, Fab, useMediaQuery, useTheme, CircularProgress, Alert, Snackbar, CssBaseline, FormControl, InputLabel, Select, MenuItem, Switch, FormControlLabel, Tab, Tabs } from '@mui/material';\nimport { Folder, Send, Person, Description, TableChart, Save, History, Work } from '@mui/icons-material';\n// No longer needed from frontend: import { GoogleGenerativeAI } from '@google/generative-ai';\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport ChatHistory from './components/ChatHistory';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst theme = createTheme({\n  palette: {\n    mode: 'dark',\n    primary: {\n      main: '#8B5CF6'\n    },\n    secondary: {\n      main: '#6366F1'\n    },\n    background: {\n      default: '#000000',\n      paper: '#0A0A0A'\n    },\n    text: {\n      primary: '#FFFFFF',\n      secondary: '#E5E7EB'\n    },\n    success: {\n      main: '#10B981'\n    },\n    error: {\n      main: '#EF4444'\n    }\n  },\n  typography: {\n    fontFamily: '\"Inter\", \"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n    h4: {\n      fontWeight: 700\n    },\n    h6: {\n      fontWeight: 600\n    }\n  },\n  components: {\n    MuiButton: {\n      styleOverrides: {\n        root: {\n          borderRadius: 12,\n          textTransform: 'none',\n          fontWeight: 600,\n          padding: '10px 20px'\n        },\n        contained: {\n          boxShadow: '0 4px 20px rgba(139, 92, 246, 0.4)',\n          background: 'linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)',\n          '&:hover': {\n            transform: 'translateY(-1px)',\n            boxShadow: '0 6px 30px rgba(139, 92, 246, 0.6)',\n            background: 'linear-gradient(135deg, #A78BFA 0%, #818CF8 100%)'\n          }\n        }\n      }\n    },\n    MuiPaper: {\n      styleOverrides: {\n        root: {\n          background: 'rgba(20, 20, 20, 0.95)',\n          backdropFilter: 'blur(20px)',\n          border: '1px solid rgba(139, 92, 246, 0.3)',\n          borderRadius: 16\n        }\n      }\n    }\n  }\n});\nconst drawerWidth = 280;\nfunction App() {\n  _s();\n  const muiTheme = useTheme();\n  const isMobile = useMediaQuery(muiTheme.breakpoints.down('md'));\n  const [messages, setMessages] = useState([{\n    text: '×©×œ×•×! ×× ×™ TLV500 AI Assistant. ×”×ª×—×‘×¨ ×œ×—×©×‘×•×Ÿ Google ×•×‘×—×¨ ×’×™×œ×™×•×Ÿ ×›×“×™ ×œ×”×ª×—×™×œ.',\n    sender: 'assistant',\n    timestamp: new Date(),\n    id: Date.now()\n  }]);\n  const [question, setQuestion] = useState('');\n  const [fileName, setFileName] = useState('');\n  const [googleSheetsUrl, setGoogleSheetsUrl] = useState('');\n  const [lastInternalNotes, setLastInternalNotes] = useState(\"\");\n  const [changesCount, setChangesCount] = useState(0);\n  const [isSheetLoaded, setIsSheetLoaded] = useState(false);\n  const [projects] = useState([{\n    name: '×”×¢×¨×›×ª ×©×•×•×™ ×˜×§-×’×œ×•×‘×œ',\n    status: '×¤×¢×™×œ',\n    lastModified: '×œ×¤× ×™ 2 ×“×§×•×ª'\n  }, {\n    name: '× ×™×ª×•×— Q3 ×¤×™×Ÿ-×§×•×¨×¤',\n    status: '×˜×™×•×˜×”',\n    lastModified: '×œ×¤× ×™ ×©×¢×”'\n  }, {\n    name: '×ž×¦×’×ª ×¡×˜××¨×˜-××¤',\n    status: '×”×•×©×œ×',\n    lastModified: '×œ×¤× ×™ ×™×•×ž×™×™×'\n  }]);\n  const [isPickerReady, setIsPickerReady] = useState(false);\n  const [accessToken, setAccessToken] = useState('');\n  const [sheetsMetadata, setSheetsMetadata] = useState('');\n  const [authError, setAuthError] = useState('');\n  const [showSnackbar, setShowSnackbar] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState('');\n  const [availableSheets, setAvailableSheets] = useState([]);\n  const [selectedSheetName, setSelectedSheetName] = useState('');\n  const [isLoadingSheets, setIsLoadingSheets] = useState(false);\n  const [extractedPdf, setExtractedPdf] = useState(null);\n  const [isExtractingData, setIsExtractingData] = useState(false);\n  const [extractedExcel, setExtractedExcel] = useState(null);\n  const [isExtractingExcel, setIsExtractingExcel] = useState(false);\n  const [isAgentMode, setIsAgentMode] = useState(false);\n  const [isStreamingResponse, setIsStreamingResponse] = useState(false);\n\n  // Chat History Management\n  const [currentSessionId, setCurrentSessionId] = useState(null);\n  const [sidebarTab, setSidebarTab] = useState(0); // 0 = Projects, 1 = Chat History\n  const [user, setUser] = useState(null);\n  const chatEndRef = useRef(null);\n  useEffect(() => {\n    const savedPdfJson = localStorage.getItem('extractedPdf');\n    if (savedPdfJson) {\n      try {\n        const savedPdf = JSON.parse(savedPdfJson);\n        if (savedPdf && savedPdf.name && savedPdf.data) {\n          setExtractedPdf(savedPdf);\n          setMessages(prev => [...prev, {\n            text: `ðŸ“„ × ×ª×•× ×™× ×§×•×“×ž×™× ×©×—×•×œ×¦×• ×ž-PDF \"${savedPdf.name}\" × ×˜×¢× ×•.`,\n            sender: 'system',\n            timestamp: new Date(),\n            id: Date.now()\n          }]);\n        }\n      } catch (e) {\n        console.error('Failed to parse extracted PDF data from localStorage', e);\n        localStorage.removeItem('extractedPdf');\n      }\n    }\n    const savedExcelJson = localStorage.getItem('extractedExcel');\n    if (savedExcelJson) {\n      try {\n        const savedExcel = JSON.parse(savedExcelJson);\n        if (savedExcel && savedExcel.name && savedExcel.data) {\n          setExtractedExcel(savedExcel);\n          setMessages(prev => [...prev, {\n            text: `ðŸ“Š × ×ª×•× ×™× ×§×•×“×ž×™× ×©×—×•×œ×¦×• ×ž-Excel \"${savedExcel.name}\" × ×˜×¢× ×•.`,\n            sender: 'system',\n            timestamp: new Date(),\n            id: Date.now()\n          }]);\n        }\n      } catch (e) {\n        console.error('Failed to parse extracted Excel data from localStorage', e);\n        localStorage.removeItem('extractedExcel');\n      }\n    }\n  }, []);\n\n  // Fetch user info when access token is available\n  useEffect(() => {\n    if (accessToken) {\n      fetchUserInfo();\n    }\n  }, [accessToken]);\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const token = params.get('token');\n    if (token) {\n      setAccessToken(token);\n      setSnackbarMessage('×”×ª×—×‘×¨×ª ×‘×”×¦×œ×—×”!');\n      setShowSnackbar(true);\n      window.history.replaceState({}, document.title, \"/\");\n    } else {\n      // Check if user is already authenticated\n      checkAuthStatus();\n    }\n  }, []);\n  const checkAuthStatus = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/api/user', {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setUser(data.user);\n        setAccessToken(data.accessToken);\n        setSnackbarMessage('×‘×¨×•×š ×”×‘× ×‘×—×–×¨×”!');\n        setShowSnackbar(true);\n      }\n    } catch (error) {\n      console.log('Not authenticated:', error);\n      // User is not authenticated, show login button\n    }\n  };\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n  useEffect(() => {\n    const script = document.createElement('script');\n    script.src = 'https://apis.google.com/js/api.js';\n    script.onload = () => window.gapi.load('picker', {\n      'callback': () => setIsPickerReady(true)\n    });\n    document.head.appendChild(script);\n  }, []);\n  const fetchUserInfo = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/api/user', {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setUser(data.user);\n      }\n    } catch (error) {\n      console.error('Error fetching user info:', error);\n    }\n  };\n  const handleSessionSelect = async sessionId => {\n    if (!sessionId) {\n      setCurrentSessionId(null);\n      setMessages([{\n        text: '×©×œ×•×! ×× ×™ TLV500 AI Assistant. ×”×ª×—×‘×¨ ×œ×—×©×‘×•×Ÿ Google ×•×‘×—×¨ ×’×™×œ×™×•×Ÿ ×›×“×™ ×œ×”×ª×—×™×œ.',\n        sender: 'assistant',\n        timestamp: new Date(),\n        id: Date.now()\n      }]);\n      return;\n    }\n    setCurrentSessionId(sessionId);\n    try {\n      const response = await fetch(`http://localhost:3001/api/chat/session/${sessionId}`, {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const chatHistory = await response.json();\n        const loadedMessages = chatHistory.messages.map(msg => ({\n          text: msg.content,\n          sender: msg.role === 'user' ? 'user' : 'assistant',\n          timestamp: new Date(msg.timestamp),\n          id: msg._id || Date.now() + Math.random()\n        }));\n        setMessages(loadedMessages);\n        setSidebarTab(1); // Switch to chat history tab\n      }\n    } catch (error) {\n      console.error('Error loading chat session:', error);\n      setSnackbarMessage('×©×’×™××” ×‘×˜×¢×™× ×ª ×”×©×™×—×”');\n      setShowSnackbar(true);\n    }\n  };\n  const generateSessionId = () => {\n    return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n  };\n  function columnIndexToLetter(colIndex) {\n    let temp,\n      letter = '';\n    let column = colIndex + 1;\n    while (column > 0) {\n      temp = (column - 1) % 26;\n      letter = String.fromCharCode(temp + 65) + letter;\n      column = (column - temp - 1) / 26;\n    }\n    return letter;\n  }\n  const renderMessageText = text => {\n    if (typeof text !== 'string') return text;\n\n    // Only handle code between backticks, leave everything else as normal text\n    const parts = text.split('`');\n    if (parts.length === 1) {\n      // No backticks, return as normal text\n      return text;\n    }\n    return parts.map((part, index) => {\n      if (index % 2 === 1) {\n        // This is code between backticks\n        return /*#__PURE__*/_jsxDEV(Chip, {\n          label: part,\n          size: \"small\",\n          sx: {\n            direction: 'ltr',\n            backgroundColor: 'rgba(0,0,0,0.6)',\n            color: '#E5E7EB',\n            fontFamily: '\"Fira Code\", \"Courier New\", monospace',\n            height: 'auto',\n            mx: 0.5,\n            '& .MuiChip-label': {\n              padding: '4px 8px',\n              fontSize: '0.85em'\n            }\n          }\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this);\n      } else {\n        // Regular text\n        return part;\n      }\n    });\n  };\n  function processSheetData(values) {\n    const mappedData = {};\n    if (!Array.isArray(values)) return mappedData;\n    values.forEach((row, rowIndex) => {\n      if (row && row.length > 0) {\n        row.forEach((cellValue, colIndex) => {\n          if (cellValue !== null && cellValue !== '') {\n            const cellAddress = columnIndexToLetter(colIndex) + (rowIndex + 1);\n            mappedData[cellAddress] = cellValue;\n          }\n        });\n      }\n    });\n    return mappedData;\n  }\n  const makeGoogleSheetsAPICall = async (spreadsheetId, range, values = null, method = 'GET') => {\n    if (!accessToken) throw new Error('No access token available. Please log in.');\n    const baseUrl = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}`;\n    try {\n      var _data$error;\n      let url, options;\n      if (method === 'GET') {\n        url = `${baseUrl}/values/${range}`;\n        options = {\n          method,\n          headers: {\n            'Authorization': `Bearer ${accessToken}`,\n            'Content-Type': 'application/json'\n          }\n        };\n      } else {\n        url = `${baseUrl}/values/${range}?valueInputOption=RAW`;\n        options = {\n          method,\n          headers: {\n            'Authorization': `Bearer ${accessToken}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            values\n          })\n        };\n      }\n      const response = await fetch(url, options);\n      const data = await response.json();\n      if (!response.ok) throw new Error(((_data$error = data.error) === null || _data$error === void 0 ? void 0 : _data$error.message) || 'API call failed');\n      return data;\n    } catch (error) {\n      console.error('Google Sheets API error:', error);\n      throw error;\n    }\n  };\n  const extractSpreadsheetId = url => {\n    const match = url.match(/\\/spreadsheets\\/d\\/([a-zA-Z0-9-_]+)/);\n    return match ? match[1] : null;\n  };\n  const getSpreadsheetMetadata = async spreadsheetId => {\n    if (!accessToken) return [];\n    try {\n      const url = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}`;\n      const response = await fetch(url, {\n        headers: {\n          'Authorization': `Bearer ${accessToken}`\n        }\n      });\n      if (!response.ok) throw new Error('Failed to fetch spreadsheet metadata');\n      const metadata = await response.json();\n      return metadata.sheets.map(sheet => ({\n        name: sheet.properties.title,\n        id: sheet.properties.sheetId\n      }));\n    } catch (error) {\n      console.error('Error fetching spreadsheet metadata:', error);\n      return [];\n    }\n  };\n  const handleFileUpload = async (event, fileType) => {\n    const file = event.target.files[0];\n    if (!file) return;\n    if (file.type === 'application/pdf') {\n      // Clean all previous PDF-related state\n      setExtractedPdf(null);\n      localStorage.removeItem('extractedPdf');\n      setIsExtractingData(true);\n\n      // Remove any previous PDF-related messages\n      setMessages(prev => prev.filter(msg => !msg.text.includes('× ×ª×•× ×™× ×—×•×œ×¦×•') && !msg.text.includes('×©×’×™××” ×‘×—×™×œ×•×¥') && !msg.text.includes('× ×ª×•× ×™ ×”-PDF × ×•×§×•')));\n      setMessages(prev => [...prev, {\n        text: `â³ ×ž×—×œ×¥ × ×ª×•× ×™× ×ž×§×•×‘×¥ \"${file.name}\"...`,\n        sender: 'system',\n        timestamp: new Date(),\n        id: Date.now()\n      }]);\n      const formData = new FormData();\n      formData.append('pdf', file);\n      fetch('http://localhost:3001/api/extract-pdf-data', {\n        method: 'POST',\n        body: formData\n      }).then(response => {\n        if (!response.ok) {\n          return response.json().then(err => {\n            throw new Error(err.error || 'Failed to extract data');\n          });\n        }\n        return response.json();\n      }).then(result => {\n        const pdfInfo = {\n          name: file.name,\n          data: result\n        };\n        setExtractedPdf(pdfInfo);\n        localStorage.setItem('extractedPdf', JSON.stringify(pdfInfo));\n        setMessages(prev => prev.filter(msg => !msg.text.includes('â³ ×ž×—×œ×¥ × ×ª×•× ×™×')));\n        setMessages(prev => [...prev, {\n          text: `âœ… × ×ª×•× ×™× ×—×•×œ×¦×• ×‘×”×¦×œ×—×” ×ž-\"${file.name}\". ×›×¢×ª × ×™×ª×Ÿ ×œ×©××•×œ ×©××œ×•×ª ×¢×œ ×”×§×•×‘×¥.`,\n          sender: 'system',\n          timestamp: new Date(),\n          id: Date.now()\n        }]);\n      }).catch(error => {\n        console.error('PDF data extraction failed:', error);\n        setMessages(prev => prev.filter(msg => !msg.text.includes('â³ ×ž×—×œ×¥ × ×ª×•× ×™×')));\n        setMessages(prev => [...prev, {\n          text: `âŒ ×©×’×™××” ×‘×—×™×œ×•×¥ × ×ª×•× ×™× ×ž-\"${file.name}\": ${error.message}`,\n          sender: 'system',\n          timestamp: new Date(),\n          id: Date.now()\n        }]);\n      }).finally(() => {\n        setIsExtractingData(false);\n      });\n    } else if (fileType === 'Excel') {\n      setExtractedExcel(null);\n      localStorage.removeItem('extractedExcel');\n      setIsExtractingExcel(true);\n      setMessages(prev => prev.filter(msg => !msg.text.includes('×—×•×œ×¦×• ×ž-Excel') && !msg.text.includes('×©×’×™××” ×‘×—×™×œ×•×¥ Excel') && !msg.text.includes('× ×ª×•× ×™ ×”-Excel × ×•×§×•')));\n      setMessages(prev => [...prev, {\n        text: `â³ ×ž×—×œ×¥ × ×ª×•× ×™× ×ž×§×•×‘×¥ Excel \"${file.name}\"...`,\n        sender: 'system',\n        timestamp: new Date(),\n        id: Date.now()\n      }]);\n      const formData = new FormData();\n      formData.append('excel', file);\n      fetch('http://localhost:3001/api/extract-excel-data', {\n        method: 'POST',\n        body: formData\n      }).then(response => {\n        if (!response.ok) {\n          return response.json().then(err => {\n            throw new Error(err.error || 'Failed to extract Excel data');\n          });\n        }\n        return response.json();\n      }).then(result => {\n        const excelInfo = {\n          name: file.name,\n          data: result.data\n        };\n        setExtractedExcel(excelInfo);\n        localStorage.setItem('extractedExcel', JSON.stringify(excelInfo));\n        setMessages(prev => prev.filter(msg => !msg.text.includes('â³ ×ž×—×œ×¥ × ×ª×•× ×™× ×ž×§×•×‘×¥ Excel')));\n        setMessages(prev => [...prev, {\n          text: `âœ… × ×ª×•× ×™× ×—×•×œ×¦×• ×‘×”×¦×œ×—×” ×ž-Excel \"${file.name}\".`,\n          sender: 'system',\n          timestamp: new Date(),\n          id: Date.now()\n        }]);\n      }).catch(error => {\n        console.error('Excel data extraction failed:', error);\n        setMessages(prev => prev.filter(msg => !msg.text.includes('â³ ×ž×—×œ×¥ × ×ª×•× ×™× ×ž×§×•×‘×¥ Excel')));\n        setMessages(prev => [...prev, {\n          text: `âŒ ×©×’×™××” ×‘×—×™×œ×•×¥ × ×ª×•× ×™ Excel: ${error.message}`,\n          sender: 'system',\n          timestamp: new Date(),\n          id: Date.now()\n        }]);\n      }).finally(() => {\n        setIsExtractingExcel(false);\n      });\n    }\n  };\n  const loadAvailableSheets = async spreadsheetId => {\n    setIsLoadingSheets(true);\n    try {\n      const sheets = await getSpreadsheetMetadata(spreadsheetId);\n      setAvailableSheets(sheets);\n      if (sheets.length > 0) {\n        setSelectedSheetName(sheets[0].name);\n        setSheetsMetadata(sheets);\n        await getSheetData(spreadsheetId, sheets[0].name);\n        setMessages(prev => {\n          var _sheets$;\n          return [...prev, {\n            text: `ðŸ” ×’×œ×™×•×Ÿ ×¤×¢×™×œ: ${((_sheets$ = sheets[0]) === null || _sheets$ === void 0 ? void 0 : _sheets$.name) || '×œ× ×™×“×•×¢'}`,\n            sender: 'system',\n            timestamp: new Date(),\n            id: Date.now()\n          }];\n        });\n      }\n    } finally {\n      setIsLoadingSheets(false);\n    }\n  };\n  const handleGoogleSheetsUrl = async url => {\n    setGoogleSheetsUrl(url);\n    setIsSheetLoaded(true);\n    const spreadsheetId = extractSpreadsheetId(url);\n    if (spreadsheetId && accessToken) await loadAvailableSheets(spreadsheetId);\n  };\n  const handleSheetChange = async newSheetName => {\n    if (newSheetName === selectedSheetName) return;\n    setSelectedSheetName(newSheetName);\n    const spreadsheetId = extractSpreadsheetId(googleSheetsUrl);\n    if (spreadsheetId) {\n      await getSheetData(spreadsheetId, newSheetName);\n      setMessages(prev => [...prev, {\n        text: `ðŸ“‹ ×”×•×—×œ×£ ×œ×’×œ×™×•×Ÿ: ${newSheetName}`,\n        sender: 'system',\n        timestamp: new Date(),\n        id: Date.now()\n      }]);\n    }\n  };\n  const pickerCallback = data => {\n    if (data.action === window.google.picker.Action.PICKED) {\n      const doc = data.docs[0];\n      setFileName(doc.name);\n      handleGoogleSheetsUrl(doc.url);\n      setSnackbarMessage(`×˜×¢×Ÿ ×’×™×œ×™×•×Ÿ: ${doc.name}`);\n      setShowSnackbar(true);\n    }\n  };\n  const createPicker = () => {\n    const developerKey = process.env.REACT_APP_GEMINI_API_KEY;\n    const clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID;\n    if (!clientId || !developerKey) {\n      setAuthError('×ž×¤×ª×—×•×ª API ××™× × ×ž×•×’×“×¨×™× ×›×¨××•×™.');\n      setShowSnackbar(true);\n      return;\n    }\n    const view = new window.google.picker.View(window.google.picker.ViewId.SPREADSHEETS);\n    view.setMimeTypes(\"application/vnd.google-apps.spreadsheet\");\n    const picker = new window.google.picker.PickerBuilder().setAppId(clientId.split('-')[0]).setOAuthToken(accessToken).setDeveloperKey(developerKey).addView(view).setCallback(pickerCallback).build();\n    picker.setVisible(true);\n  };\n  const getSheetData = async (spreadsheetId, sheetName = null) => {\n    if (!accessToken) return null;\n    try {\n      const range = sheetName ? `'${sheetName}'!A1:Z1000` : 'A1:Z1000';\n      const apiResponse = await makeGoogleSheetsAPICall(spreadsheetId, range);\n      // The processSheetData function is removed as we will send raw data to backend\n      return apiResponse.values || [];\n    } catch (error) {\n      console.error('Failed to fetch sheet data:', error);\n      setMessages(prev => [...prev, {\n        text: `âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×’×™×œ×™×•×Ÿ: ${error.message}`,\n        sender: 'system',\n        timestamp: new Date(),\n        id: Date.now()\n      }]);\n      return null;\n    }\n  };\n  const sendMessage = async () => {\n    if (!question.trim() || isStreamingResponse) return;\n    const currentQuestion = question;\n    const userMessage = {\n      text: currentQuestion,\n      sender: 'user',\n      timestamp: new Date(),\n      id: Date.now()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setQuestion('');\n    setIsStreamingResponse(true);\n\n    // Generate session ID if this is a new conversation\n    let sessionId = currentSessionId;\n    if (!sessionId) {\n      sessionId = generateSessionId();\n      setCurrentSessionId(sessionId);\n    }\n    const loadingMessageId = Date.now() + 1;\n    setMessages(prev => [...prev, {\n      text: '',\n      sender: 'assistant',\n      isLoading: true,\n      timestamp: new Date(),\n      id: loadingMessageId\n    }]);\n    try {\n      const sheetData = isSheetLoaded ? await getSheetData(extractSpreadsheetId(googleSheetsUrl), selectedSheetName) : null;\n\n      // We need to get the spreadsheetId here to send it\n      const spreadsheetId = isSheetLoaded ? extractSpreadsheetId(googleSheetsUrl) : null;\n      const payload = {\n        question: currentQuestion,\n        sheetData: sheetData,\n        extractedPdfData: extractedPdf ? extractedPdf.data : null,\n        extractedExcelData: extractedExcel ? extractedExcel.data : null,\n        isAgentMode: isAgentMode,\n        conversationHistory: messages.filter(m => !m.isLoading).map(m => ({\n          role: m.sender === 'user' ? 'user' : 'model',\n          parts: [{\n            text: m.text\n          }]\n        })),\n        spreadsheetId: spreadsheetId,\n        accessToken: accessToken,\n        sessionId: sessionId,\n        // Include session ID\n        sheetsMetadata: sheetsMetadata,\n        // ×•×“× ×©×”×ž×©×ª× ×” ×”×–×” ×§×™×™× ×•×ž×›×™×œ ××ª ×”×ž×™×“×¢\n        selectedSheetName: selectedSheetName // ×•×“× ×©×”×ž×©×ª× ×” ×”×–×” ×§×™×™× ×•×ž×›×™×œ ××ª ×©× ×”×’×™×œ×™×•×Ÿ\n      };\n      const response = await fetch('http://localhost:3001/api/chat-stream', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok || !response.body) {\n        const errorText = await response.text();\n        throw new Error(`Server error: ${response.status} ${errorText}`);\n      }\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder();\n      let accumulatedResponse = '';\n      while (true) {\n        const {\n          value,\n          done\n        } = await reader.read();\n        if (done) break;\n        accumulatedResponse += decoder.decode(value, {\n          stream: true\n        });\n        setMessages(prev => prev.map(m => {\n          if (m.id === loadingMessageId) {\n            // Show the accumulated response directly as text\n            return {\n              ...m,\n              text: accumulatedResponse,\n              isLoading: true\n            };\n          }\n          return m;\n        }));\n      }\n\n      // Final response processing - just show the accumulated text\n      setMessages(prev => prev.map(m => m.id === loadingMessageId ? {\n        ...m,\n        text: accumulatedResponse,\n        isLoading: false\n      } : m));\n    } catch (error) {\n      console.error('Error in sendMessage:', error);\n      setMessages(prev => prev.map(m => m.id === loadingMessageId ? {\n        ...m,\n        text: `××™×¨×¢×” ×©×’×™××”: ${error.message}`,\n        isLoading: false,\n        isError: true\n      } : m));\n    } finally {\n      setIsStreamingResponse(false);\n    }\n  };\n  const saveAllChanges = () => {\n    setMessages(prev => [...prev, {\n      text: `ðŸ’¾ ×›×œ ×”×©×™× ×•×™×™× × ×©×ž×¨×• ×œ×’×™×œ×™×•×Ÿ ${fileName}`,\n      sender: 'system',\n      timestamp: new Date(),\n      id: Date.now()\n    }]);\n  };\n  return /*#__PURE__*/_jsxDEV(ThemeProvider, {\n    theme: theme,\n    children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 642,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        height: '100vh',\n        bgcolor: 'background.default',\n        overflow: 'hidden'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: `radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.08) 0%, transparent 60%), radial-gradient(circle at 80% 70%, rgba(99, 102, 241, 0.06) 0%, transparent 60%)`,\n          pointerEvents: 'none',\n          zIndex: 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 9\n      }, this), !isMobile && /*#__PURE__*/_jsxDEV(Drawer, {\n        variant: \"permanent\",\n        sx: {\n          width: drawerWidth,\n          flexShrink: 0,\n          zIndex: 1,\n          '& .MuiDrawer-paper': {\n            width: drawerWidth,\n            boxSizing: 'border-box',\n            bgcolor: 'rgba(10, 10, 10, 0.98)',\n            borderRight: '1px solid rgba(139, 92, 246, 0.4)',\n            backdropFilter: 'blur(20px)'\n          }\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            p: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            sx: {\n              background: 'linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)',\n              backgroundClip: 'text',\n              WebkitBackgroundClip: 'text',\n              WebkitTextFillColor: 'transparent',\n              fontWeight: 700\n            },\n            children: \"TLV500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 648,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"text.secondary\",\n            children: \"AI Assistant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 649,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {\n          sx: {\n            borderColor: 'rgba(139, 92, 246, 0.4)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            p: 3,\n            display: 'flex',\n            alignItems: 'center',\n            gap: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            src: user === null || user === void 0 ? void 0 : user.profilePicture,\n            sx: {\n              width: 45,\n              height: 45,\n              background: 'linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)'\n            },\n            children: user !== null && user !== void 0 && user.name ? user.name.charAt(0) : /*#__PURE__*/_jsxDEV(Person, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 53\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              fontWeight: 600,\n              children: (user === null || user === void 0 ? void 0 : user.name) || '×ž×©×ª×ž×© ××•×¨×—'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 660,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: \"text.secondary\",\n              children: (user === null || user === void 0 ? void 0 : user.email) || '×œ× ×ž×—×•×‘×¨'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {\n          sx: {\n            borderColor: 'rgba(139, 92, 246, 0.4)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n          value: sidebarTab,\n          onChange: (e, newValue) => setSidebarTab(newValue),\n          variant: \"fullWidth\",\n          sx: {\n            borderBottom: '1px solid rgba(139, 92, 246, 0.4)',\n            '& .MuiTab-root': {\n              color: 'text.secondary',\n              minHeight: 48,\n              '&.Mui-selected': {\n                color: 'primary.main'\n              }\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(Tab, {\n            icon: /*#__PURE__*/_jsxDEV(Work, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 26\n            }, this),\n            label: \"\\u05E4\\u05E8\\u05D5\\u05D9\\u05E7\\u05D8\\u05D9\\u05DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 684,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            icon: /*#__PURE__*/_jsxDEV(History, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 685,\n              columnNumber: 26\n            }, this),\n            label: \"\\u05E9\\u05D9\\u05D7\\u05D5\\u05EA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flexGrow: 1,\n            overflow: 'hidden'\n          },\n          children: [sidebarTab === 0 && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              p: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              color: \"text.secondary\",\n              gutterBottom: true,\n              fontWeight: 600,\n              children: \"\\u05E4\\u05E8\\u05D5\\u05D9\\u05E7\\u05D8\\u05D9\\u05DD \\u05D0\\u05D7\\u05E8\\u05D5\\u05E0\\u05D9\\u05DD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 692,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(List, {\n              dense: true,\n              children: projects.map((project, index) => /*#__PURE__*/_jsxDEV(ListItem, {\n                sx: {\n                  px: 0,\n                  py: 1,\n                  borderRadius: 2,\n                  mb: 1,\n                  '&:hover': {\n                    bgcolor: 'rgba(139, 92, 246, 0.15)',\n                    transform: 'translateX(4px)'\n                  }\n                },\n                children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                  sx: {\n                    minWidth: 36\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Folder, {\n                    sx: {\n                      color: 'primary.main',\n                      fontSize: 20\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 696,\n                    columnNumber: 61\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 696,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: project.name,\n                  secondary: project.lastModified,\n                  primaryTypographyProps: {\n                    variant: 'body2',\n                    fontWeight: 500\n                  },\n                  secondaryTypographyProps: {\n                    variant: 'caption'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 697,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Chip, {\n                  label: project.status,\n                  size: \"small\",\n                  color: project.status === '×¤×¢×™×œ' ? 'primary' : 'default',\n                  sx: {\n                    fontSize: '0.65rem',\n                    fontWeight: 600\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 698,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 695,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 17\n          }, this), sidebarTab === 1 && /*#__PURE__*/_jsxDEV(ChatHistory, {\n            accessToken: accessToken,\n            onSessionSelect: handleSessionSelect,\n            currentSessionId: currentSessionId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 706,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 689,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          flexGrow: 1,\n          display: 'flex',\n          flexDirection: isMobile ? 'column' : 'row',\n          zIndex: 1,\n          height: '100vh',\n          overflow: 'hidden'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flex: isMobile ? '1 1 60%' : '0 0 65%',\n            p: 2,\n            display: 'flex',\n            flexDirection: 'column',\n            height: '100%',\n            overflow: 'hidden'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mb: 2,\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              flexWrap: 'wrap',\n              gap: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                fontWeight: 600,\n                color: \"text.primary\",\n                children: fileName || '×œ× × ×‘×—×¨ ×’×™×œ×™×•×Ÿ'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 719,\n                columnNumber: 17\n              }, this), availableSheets.length > 1 && /*#__PURE__*/_jsxDEV(FormControl, {\n                size: \"small\",\n                sx: {\n                  minWidth: 180\n                },\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  sx: {\n                    color: 'text.secondary'\n                  },\n                  children: \"\\u05D1\\u05D7\\u05E8 \\u05D2\\u05DC\\u05D9\\u05D5\\u05DF\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 722,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  value: selectedSheetName,\n                  label: \"\\u05D1\\u05D7\\u05E8 \\u05D2\\u05DC\\u05D9\\u05D5\\u05DF\",\n                  onChange: e => handleSheetChange(e.target.value),\n                  disabled: isLoadingSheets,\n                  sx: {\n                    '& .MuiOutlinedInput-notchedOutline': {\n                      borderColor: 'rgba(139, 92, 246, 0.5)'\n                    }\n                  },\n                  children: availableSheets.map(sheet => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: sheet.name,\n                    children: sheet.name\n                  }, sheet.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 724,\n                    columnNumber: 54\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 723,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 721,\n                columnNumber: 19\n              }, this), isLoadingSheets && /*#__PURE__*/_jsxDEV(CircularProgress, {\n                size: 20,\n                sx: {\n                  color: 'primary.main'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 718,\n              columnNumber: 15\n            }, this), !accessToken ? /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              href: \"http://localhost:3001\",\n              children: \"\\u05D4\\u05EA\\u05D7\\u05D1\\u05E8 \\u05E2\\u05DD Google\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 731,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              onClick: createPicker,\n              disabled: !isPickerReady,\n              children: !isPickerReady ? '×˜×•×¢×Ÿ API...' : '×‘×—×¨ ×’×™×œ×™×•×Ÿ ×ž-Drive'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 733,\n              columnNumber: 17\n            }, this), changesCount > 0 && /*#__PURE__*/_jsxDEV(Chip, {\n              label: `${changesCount} ×©×™× ×•×™×™× ×œ× ×©×ž×•×¨×™×`,\n              size: \"small\",\n              color: \"warning\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 737,\n              columnNumber: 36\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              startIcon: /*#__PURE__*/_jsxDEV(Save, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 738,\n                columnNumber: 54\n              }, this),\n              onClick: saveAllChanges,\n              color: \"primary\",\n              size: \"small\",\n              children: \"\\u05E9\\u05DE\\u05D5\\u05E8 \\u05D4\\u05DB\\u05DC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 717,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Paper, {\n            sx: {\n              flexGrow: 1,\n              p: 2,\n              display: 'flex',\n              flexDirection: 'column',\n              overflow: 'hidden',\n              background: 'rgba(15, 15, 15, 0.98)',\n              border: '1px solid rgba(139, 92, 246, 0.25)'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                mb: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle1\",\n                fontWeight: 600,\n                children: \"\\u05D2\\u05D9\\u05DC\\u05D9\\u05D5\\u05DF \\u05E2\\u05D1\\u05D5\\u05D3\\u05D4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 742,\n                columnNumber: 17\n              }, this), !isSheetLoaded && /*#__PURE__*/_jsxDEV(TextField, {\n                placeholder: \"\\u05D4\\u05DB\\u05E0\\u05E1 \\u05E7\\u05D9\\u05E9\\u05D5\\u05E8 \\u05DC\\u05D2\\u05D5\\u05D2\\u05DC \\u05E9\\u05D9\\u05D8\\u05E1...\",\n                size: \"small\",\n                sx: {\n                  minWidth: 300\n                },\n                onKeyPress: async e => {\n                  if (e.key === 'Enter' && e.target.value) {\n                    await handleGoogleSheetsUrl(e.target.value);\n                    e.target.value = '';\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 744,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                flexGrow: 1,\n                border: '1px solid rgba(139, 92, 246, 0.4)',\n                borderRadius: 1,\n                bgcolor: 'rgba(5, 5, 5, 0.8)',\n                position: 'relative',\n                overflow: 'hidden'\n              },\n              children: isSheetLoaded ? /*#__PURE__*/_jsxDEV(\"iframe\", {\n                src: googleSheetsUrl,\n                width: \"100%\",\n                height: \"100%\",\n                style: {\n                  border: 'none',\n                  borderRadius: '4px'\n                },\n                title: \"Google Sheets\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 749,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  height: '100%',\n                  color: 'text.secondary'\n                },\n                children: [/*#__PURE__*/_jsxDEV(TableChart, {\n                  sx: {\n                    fontSize: 60,\n                    mb: 2,\n                    opacity: 0.5\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 752,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"\\u05D8\\u05E2\\u05DF \\u05D2\\u05D9\\u05DC\\u05D9\\u05D5\\u05DF \\u05D2\\u05D5\\u05D2\\u05DC \\u05E9\\u05D9\\u05D8\\u05E1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 753,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  textAlign: \"center\",\n                  sx: {\n                    maxWidth: 400\n                  },\n                  children: \"\\u05D4\\u05DB\\u05E0\\u05E1 \\u05E7\\u05D9\\u05E9\\u05D5\\u05E8 \\u05DC\\u05D2\\u05D5\\u05D2\\u05DC \\u05E9\\u05D9\\u05D8\\u05E1 \\u05D1\\u05E9\\u05D3\\u05D4 \\u05DC\\u05DE\\u05E2\\u05DC\\u05D4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 754,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 751,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 747,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 740,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            width: isMobile ? '100%' : '35%',\n            flex: isMobile ? '1 1 40%' : '0 0 35%',\n            p: 2,\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            sx: {\n              flexGrow: 1,\n              display: 'flex',\n              flexDirection: 'column',\n              overflow: 'hidden',\n              background: 'rgba(25, 25, 25, 0.98)',\n              border: '1px solid rgba(139, 92, 246, 0.25)'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                p: 2,\n                borderBottom: '1px solid rgba(139, 92, 246, 0.4)'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                fontWeight: 600,\n                children: \"\\u05E2\\u05D5\\u05D6\\u05E8 AI\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 763,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"text.secondary\",\n                children: \"\\u05DE\\u05D5\\u05DB\\u05DF \\u05DC\\u05E2\\u05D6\\u05D5\\u05E8 \\u05E2\\u05DD \\u05D4\\u05E0\\u05D9\\u05EA\\u05D5\\u05D7 \\u05E9\\u05DC\\u05DA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 764,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 762,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                p: 2,\n                borderBottom: '1px solid rgba(139, 92, 246, 0.4)'\n              },\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  flexDirection: 'column',\n                  gap: 2\n                },\n                children: [/*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    gap: 1\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outlined\",\n                    component: \"label\",\n                    startIcon: /*#__PURE__*/_jsxDEV(Description, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 769,\n                      columnNumber: 77\n                    }, this),\n                    size: \"small\",\n                    disabled: isExtractingData,\n                    sx: {\n                      flex: 1,\n                      borderColor: 'rgba(139, 92, 246, 0.5)',\n                      '&.Mui-disabled': {\n                        color: 'text.secondary'\n                      }\n                    },\n                    children: [isExtractingData ? '×ž×¢×‘×“...' : 'PDF', /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"file\",\n                      hidden: true,\n                      accept: \".pdf\",\n                      onChange: e => handleFileUpload(e, 'PDF'),\n                      disabled: isExtractingData\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 771,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 769,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outlined\",\n                    component: \"label\",\n                    startIcon: /*#__PURE__*/_jsxDEV(TableChart, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 773,\n                      columnNumber: 77\n                    }, this),\n                    size: \"small\",\n                    disabled: isExtractingExcel,\n                    sx: {\n                      flex: 1,\n                      borderColor: 'rgba(139, 92, 246, 0.5)'\n                    },\n                    children: [isExtractingExcel ? '×ž×¢×‘×“...' : 'Excel', /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"file\",\n                      hidden: true,\n                      accept: \".xlsx,.xls,.csv\",\n                      onChange: e => handleFileUpload(e, 'Excel'),\n                      disabled: isExtractingExcel\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 775,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 773,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 768,\n                  columnNumber: 19\n                }, this), extractedPdf && /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 1,\n                    mt: 1,\n                    p: 1,\n                    bgcolor: 'rgba(139, 92, 246, 0.1)',\n                    borderRadius: 2,\n                    border: '1px solid rgba(139, 92, 246, 0.3)'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Description, {\n                    sx: {\n                      color: 'primary.main',\n                      fontSize: 20\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 780,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    sx: {\n                      flex: 1,\n                      whiteSpace: 'nowrap',\n                      overflow: 'hidden',\n                      textOverflow: 'ellipsis'\n                    },\n                    children: extractedPdf.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 781,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    size: \"small\",\n                    onClick: () => {\n                      setExtractedPdf(null);\n                      localStorage.removeItem('extractedPdf');\n                      setMessages(prev => [...prev, {\n                        text: 'ðŸ“„ × ×ª×•× ×™ ×”-PDF × ×•×§×• ×ž×”×”×§×©×¨.',\n                        sender: 'system',\n                        timestamp: new Date(),\n                        id: Date.now()\n                      }]);\n                    },\n                    sx: {\n                      color: 'error.main',\n                      minWidth: 'auto',\n                      p: 0.5\n                    },\n                    children: \"\\u2715\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 782,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 779,\n                  columnNumber: 21\n                }, this), extractedExcel && /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 1,\n                    mt: 1,\n                    p: 1,\n                    bgcolor: 'rgba(16, 185, 129, 0.1)',\n                    borderRadius: 2,\n                    border: '1px solid rgba(16, 185, 129, 0.3)'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(TableChart, {\n                    sx: {\n                      color: 'success.main',\n                      fontSize: 20\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 787,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    sx: {\n                      flex: 1,\n                      whiteSpace: 'nowrap',\n                      overflow: 'hidden',\n                      textOverflow: 'ellipsis'\n                    },\n                    children: extractedExcel.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 788,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    size: \"small\",\n                    onClick: () => {\n                      setExtractedExcel(null);\n                      localStorage.removeItem('extractedExcel');\n                      setMessages(prev => [...prev, {\n                        text: 'ðŸ“Š × ×ª×•× ×™ ×”-Excel × ×•×§×• ×ž×”×”×§×©×¨.',\n                        sender: 'system',\n                        timestamp: new Date(),\n                        id: Date.now()\n                      }]);\n                    },\n                    sx: {\n                      color: 'error.main',\n                      minWidth: 'auto',\n                      p: 0.5\n                    },\n                    children: \"\\u2715\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 789,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 786,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 767,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 766,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                flexGrow: 1,\n                overflow: 'auto',\n                p: 2\n              },\n              children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  mb: 2\n                },\n                className: \"chat-message\",\n                children: [/*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    justifyContent: msg.sender === 'user' ? 'flex-end' : 'flex-start',\n                    mb: 1\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Paper, {\n                    sx: {\n                      p: 1.5,\n                      maxWidth: '85%',\n                      background: msg.sender === 'user' ? 'linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)' : 'rgba(35, 35, 35, 0.9)',\n                      color: 'white',\n                      borderRadius: 3\n                    },\n                    children: msg.isLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                      size: 16,\n                      color: \"inherit\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 805,\n                      columnNumber: 42\n                    }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      sx: {\n                        whiteSpace: 'pre-wrap'\n                      },\n                      children: msg.text\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 805,\n                      columnNumber: 91\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 798,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 797,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"text.secondary\",\n                  sx: {\n                    display: 'block',\n                    textAlign: msg.sender === 'user' ? 'right' : 'left',\n                    px: 1\n                  },\n                  children: msg.timestamp.toLocaleTimeString('he-IL', {\n                    hour: '2-digit',\n                    minute: '2-digit'\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 808,\n                  columnNumber: 21\n                }, this)]\n              }, msg.id || index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 796,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: chatEndRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 813,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 794,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                p: 2,\n                borderTop: '1px solid rgba(139, 92, 246, 0.4)'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  gap: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(TextField, {\n                  fullWidth: true,\n                  variant: \"outlined\",\n                  placeholder: \"\\u05E9\\u05D0\\u05DC \\u05D0\\u05D5\\u05EA\\u05D9 \\u05DB\\u05DC \\u05D3\\u05D1\\u05E8... (Shift+Enter \\u05DC\\u05E9\\u05D5\\u05E8\\u05D4 \\u05D7\\u05D3\\u05E9\\u05D4)\",\n                  value: question,\n                  onChange: e => setQuestion(e.target.value),\n                  onKeyPress: e => {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                      e.preventDefault(); // Prevents adding a new line\n                      sendMessage();\n                    }\n                  },\n                  multiline: true,\n                  minRows: 2,\n                  maxRows: 5,\n                  sx: {\n                    direction: 'rtl',\n                    '& .MuiOutlinedInput-root': {\n                      borderRadius: 3,\n                      direction: 'rtl',\n                      '& textarea': {\n                        textAlign: 'right',\n                        direction: 'rtl'\n                      },\n                      '& input': {\n                        textAlign: 'right',\n                        direction: 'rtl'\n                      }\n                    },\n                    '& .MuiInputLabel-root': {\n                      right: 'auto',\n                      left: 0,\n                      transformOrigin: 'top right',\n                      direction: 'rtl'\n                    },\n                    '& .MuiFormLabel-root': {\n                      textAlign: 'right',\n                      direction: 'rtl'\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 817,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Fab, {\n                  color: \"primary\",\n                  onClick: sendMessage,\n                  size: \"small\",\n                  children: /*#__PURE__*/_jsxDEV(Send, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 858,\n                    columnNumber: 75\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 858,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 816,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                control: /*#__PURE__*/_jsxDEV(Switch, {\n                  checked: isAgentMode,\n                  onChange: e => setIsAgentMode(e.target.checked),\n                  disabled: !googleSheetsUrl\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 862,\n                  columnNumber: 21\n                }, this),\n                label: \"Agent Mode: Allow Sheet Editing\",\n                sx: {\n                  color: !googleSheetsUrl ? 'text.disabled' : 'text.secondary',\n                  mt: 1,\n                  mr: 0\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 860,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 815,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 761,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 760,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 715,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: showSnackbar,\n        autoHideDuration: 6000,\n        onClose: () => setShowSnackbar(false),\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'center'\n        },\n        sx: {\n          bottom: {\n            xs: 90,\n            sm: 24\n          }\n        },\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          onClose: () => setShowSnackbar(false),\n          severity: authError ? \"error\" : \"success\",\n          sx: {\n            width: '100%',\n            bgcolor: '#2E2E2E',\n            color: 'white'\n          },\n          children: snackbarMessage || authError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 880,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 879,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 641,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"5Dz7tx9/rScLWGQbJEcxYy78PQc=\", false, function () {\n  return [useTheme, useMediaQuery];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Box","Drawer","Typography","List","ListItem","ListItemText","ListItemIcon","Paper","TextField","Button","Avatar","Divider","Chip","Fab","useMediaQuery","useTheme","CircularProgress","Alert","Snackbar","CssBaseline","FormControl","InputLabel","Select","MenuItem","Switch","FormControlLabel","Tab","Tabs","Folder","Send","Person","Description","TableChart","Save","History","Work","createTheme","ThemeProvider","ChatHistory","jsxDEV","_jsxDEV","theme","palette","mode","primary","main","secondary","background","default","paper","text","success","error","typography","fontFamily","h4","fontWeight","h6","components","MuiButton","styleOverrides","root","borderRadius","textTransform","padding","contained","boxShadow","transform","MuiPaper","backdropFilter","border","drawerWidth","App","_s","muiTheme","isMobile","breakpoints","down","messages","setMessages","sender","timestamp","Date","id","now","question","setQuestion","fileName","setFileName","googleSheetsUrl","setGoogleSheetsUrl","lastInternalNotes","setLastInternalNotes","changesCount","setChangesCount","isSheetLoaded","setIsSheetLoaded","projects","name","status","lastModified","isPickerReady","setIsPickerReady","accessToken","setAccessToken","sheetsMetadata","setSheetsMetadata","authError","setAuthError","showSnackbar","setShowSnackbar","snackbarMessage","setSnackbarMessage","availableSheets","setAvailableSheets","selectedSheetName","setSelectedSheetName","isLoadingSheets","setIsLoadingSheets","extractedPdf","setExtractedPdf","isExtractingData","setIsExtractingData","extractedExcel","setExtractedExcel","isExtractingExcel","setIsExtractingExcel","isAgentMode","setIsAgentMode","isStreamingResponse","setIsStreamingResponse","currentSessionId","setCurrentSessionId","sidebarTab","setSidebarTab","user","setUser","chatEndRef","savedPdfJson","localStorage","getItem","savedPdf","JSON","parse","data","prev","e","console","removeItem","savedExcelJson","savedExcel","fetchUserInfo","params","URLSearchParams","window","location","search","token","get","history","replaceState","document","title","checkAuthStatus","response","fetch","credentials","ok","json","log","_chatEndRef$current","current","scrollIntoView","behavior","script","createElement","src","onload","gapi","load","callback","head","appendChild","handleSessionSelect","sessionId","chatHistory","loadedMessages","map","msg","content","role","_id","Math","random","generateSessionId","toString","substr","columnIndexToLetter","colIndex","temp","letter","column","String","fromCharCode","renderMessageText","parts","split","length","part","index","label","size","sx","direction","backgroundColor","color","height","mx","fontSize","_jsxFileName","lineNumber","columnNumber","processSheetData","values","mappedData","Array","isArray","forEach","row","rowIndex","cellValue","cellAddress","makeGoogleSheetsAPICall","spreadsheetId","range","method","Error","baseUrl","_data$error","url","options","headers","body","stringify","message","extractSpreadsheetId","match","getSpreadsheetMetadata","metadata","sheets","sheet","properties","sheetId","handleFileUpload","event","fileType","file","target","files","type","filter","includes","formData","FormData","append","then","err","result","pdfInfo","setItem","catch","finally","excelInfo","loadAvailableSheets","getSheetData","_sheets$","handleGoogleSheetsUrl","handleSheetChange","newSheetName","pickerCallback","action","google","picker","Action","PICKED","doc","docs","createPicker","developerKey","process","env","REACT_APP_GEMINI_API_KEY","clientId","REACT_APP_GOOGLE_CLIENT_ID","view","View","ViewId","SPREADSHEETS","setMimeTypes","PickerBuilder","setAppId","setOAuthToken","setDeveloperKey","addView","setCallback","build","setVisible","sheetName","apiResponse","sendMessage","trim","currentQuestion","userMessage","loadingMessageId","isLoading","sheetData","payload","extractedPdfData","extractedExcelData","conversationHistory","m","errorText","reader","getReader","decoder","TextDecoder","accumulatedResponse","value","done","read","decode","stream","isError","saveAllChanges","children","display","bgcolor","overflow","position","top","left","right","bottom","pointerEvents","zIndex","variant","width","flexShrink","boxSizing","borderRight","p","backgroundClip","WebkitBackgroundClip","WebkitTextFillColor","borderColor","alignItems","gap","profilePicture","charAt","email","onChange","newValue","borderBottom","minHeight","icon","flexGrow","gutterBottom","dense","project","px","py","mb","minWidth","primaryTypographyProps","secondaryTypographyProps","onSessionSelect","flexDirection","flex","justifyContent","flexWrap","disabled","href","onClick","startIcon","placeholder","onKeyPress","key","style","opacity","textAlign","maxWidth","component","hidden","accept","mt","whiteSpace","textOverflow","className","toLocaleTimeString","hour","minute","ref","borderTop","fullWidth","shiftKey","preventDefault","multiline","minRows","maxRows","transformOrigin","control","checked","mr","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","xs","sm","severity","_c","$RefreshReg$"],"sources":["/Users/naamasharir/Documents/personal/TLV500ModelAssistant/TLV500-modelAssistant/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  Box,\r\n  Drawer,\r\n  Typography,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  Paper,\r\n  TextField,\r\n  Button,\r\n  Avatar,\r\n  Divider,\r\n  Chip,\r\n  Fab,\r\n  useMediaQuery,\r\n  useTheme,\r\n  CircularProgress,\r\n  Alert,\r\n  Snackbar,\r\n  CssBaseline,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Switch,\r\n  FormControlLabel,\r\n  Tab,\r\n  Tabs\r\n} from '@mui/material';\r\nimport {\r\n  Folder,\r\n  Send,\r\n  Person,\r\n  Description,\r\n  TableChart,\r\n  Save,\r\n  History,\r\n  Work\r\n} from '@mui/icons-material';\r\n// No longer needed from frontend: import { GoogleGenerativeAI } from '@google/generative-ai';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport ChatHistory from './components/ChatHistory';\r\nimport './App.css';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    mode: 'dark',\r\n    primary: { main: '#8B5CF6' },\r\n    secondary: { main: '#6366F1' },\r\n    background: { default: '#000000', paper: '#0A0A0A' },\r\n    text: { primary: '#FFFFFF', secondary: '#E5E7EB' },\r\n    success: { main: '#10B981' },\r\n    error: { main: '#EF4444' }\r\n  },\r\n  typography: {\r\n    fontFamily: '\"Inter\", \"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n    h4: { fontWeight: 700 },\r\n    h6: { fontWeight: 600 }\r\n  },\r\n  components: {\r\n    MuiButton: {\r\n      styleOverrides: {\r\n        root: { borderRadius: 12, textTransform: 'none', fontWeight: 600, padding: '10px 20px' },\r\n        contained: {\r\n          boxShadow: '0 4px 20px rgba(139, 92, 246, 0.4)',\r\n          background: 'linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)',\r\n          '&:hover': {\r\n            transform: 'translateY(-1px)',\r\n            boxShadow: '0 6px 30px rgba(139, 92, 246, 0.6)',\r\n            background: 'linear-gradient(135deg, #A78BFA 0%, #818CF8 100%)',\r\n          }\r\n        },\r\n      },\r\n    },\r\n    MuiPaper: {\r\n      styleOverrides: {\r\n        root: {\r\n          background: 'rgba(20, 20, 20, 0.95)',\r\n          backdropFilter: 'blur(20px)',\r\n          border: '1px solid rgba(139, 92, 246, 0.3)',\r\n          borderRadius: 16,\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nconst drawerWidth = 280;\r\n\r\nfunction App() {\r\n  const muiTheme = useTheme();\r\n  const isMobile = useMediaQuery(muiTheme.breakpoints.down('md'));\r\n  \r\n  const [messages, setMessages] = useState([\r\n    { text: '×©×œ×•×! ×× ×™ TLV500 AI Assistant. ×”×ª×—×‘×¨ ×œ×—×©×‘×•×Ÿ Google ×•×‘×—×¨ ×’×™×œ×™×•×Ÿ ×›×“×™ ×œ×”×ª×—×™×œ.', sender: 'assistant', timestamp: new Date(), id: Date.now() }\r\n  ]);\r\n  const [question, setQuestion] = useState('');\r\n  const [fileName, setFileName] = useState('');\r\n  const [googleSheetsUrl, setGoogleSheetsUrl] = useState('');\r\n  const [lastInternalNotes, setLastInternalNotes] = useState(\"\");\r\n  const [changesCount, setChangesCount] = useState(0);\r\n  const [isSheetLoaded, setIsSheetLoaded] = useState(false);\r\n  const [projects] = useState([\r\n    { name: '×”×¢×¨×›×ª ×©×•×•×™ ×˜×§-×’×œ×•×‘×œ', status: '×¤×¢×™×œ', lastModified: '×œ×¤× ×™ 2 ×“×§×•×ª' },\r\n    { name: '× ×™×ª×•×— Q3 ×¤×™×Ÿ-×§×•×¨×¤', status: '×˜×™×•×˜×”', lastModified: '×œ×¤× ×™ ×©×¢×”' },\r\n    { name: '×ž×¦×’×ª ×¡×˜××¨×˜-××¤', status: '×”×•×©×œ×', lastModified: '×œ×¤× ×™ ×™×•×ž×™×™×' }\r\n  ]);\r\n\r\n  const [isPickerReady, setIsPickerReady] = useState(false);\r\n  const [accessToken, setAccessToken] = useState('');\r\n  const [sheetsMetadata, setSheetsMetadata] = useState('');\r\n  const [authError, setAuthError] = useState('');\r\n  const [showSnackbar, setShowSnackbar] = useState(false);\r\n  const [snackbarMessage, setSnackbarMessage] = useState('');\r\n  const [availableSheets, setAvailableSheets] = useState([]);\r\n  const [selectedSheetName, setSelectedSheetName] = useState('');\r\n  const [isLoadingSheets, setIsLoadingSheets] = useState(false);\r\n  const [extractedPdf, setExtractedPdf] = useState(null);\r\n  const [isExtractingData, setIsExtractingData] = useState(false);\r\n  const [extractedExcel, setExtractedExcel] = useState(null);\r\n  const [isExtractingExcel, setIsExtractingExcel] = useState(false);\r\n  const [isAgentMode, setIsAgentMode] = useState(false);\r\n  const [isStreamingResponse, setIsStreamingResponse] = useState(false);\r\n  \r\n  // Chat History Management\r\n  const [currentSessionId, setCurrentSessionId] = useState(null);\r\n  const [sidebarTab, setSidebarTab] = useState(0); // 0 = Projects, 1 = Chat History\r\n  const [user, setUser] = useState(null);\r\n  \r\n  const chatEndRef = useRef(null);\r\n\r\n\r\n  useEffect(() => {\r\n    const savedPdfJson = localStorage.getItem('extractedPdf');\r\n    if (savedPdfJson) {\r\n      try {\r\n        const savedPdf = JSON.parse(savedPdfJson);\r\n        if (savedPdf && savedPdf.name && savedPdf.data) {\r\n          setExtractedPdf(savedPdf);\r\n          setMessages(prev => [...prev, { text: `ðŸ“„ × ×ª×•× ×™× ×§×•×“×ž×™× ×©×—×•×œ×¦×• ×ž-PDF \"${savedPdf.name}\" × ×˜×¢× ×•.`, sender: 'system', timestamp: new Date(), id: Date.now() }]);\r\n        }\r\n      } catch (e) {\r\n        console.error('Failed to parse extracted PDF data from localStorage', e);\r\n        localStorage.removeItem('extractedPdf');\r\n      }\r\n    }\r\n\r\n    const savedExcelJson = localStorage.getItem('extractedExcel');\r\n    if (savedExcelJson) {\r\n        try {\r\n            const savedExcel = JSON.parse(savedExcelJson);\r\n            if (savedExcel && savedExcel.name && savedExcel.data) {\r\n                setExtractedExcel(savedExcel);\r\n                setMessages(prev => [...prev, { text: `ðŸ“Š × ×ª×•× ×™× ×§×•×“×ž×™× ×©×—×•×œ×¦×• ×ž-Excel \"${savedExcel.name}\" × ×˜×¢× ×•.`, sender: 'system', timestamp: new Date(), id: Date.now() }]);\r\n            }\r\n        } catch (e) {\r\n            console.error('Failed to parse extracted Excel data from localStorage', e);\r\n            localStorage.removeItem('extractedExcel');\r\n        }\r\n    }\r\n  }, []);\r\n\r\n  // Fetch user info when access token is available\r\n  useEffect(() => {\r\n    if (accessToken) {\r\n      fetchUserInfo();\r\n    }\r\n  }, [accessToken]);\r\n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const token = params.get('token');\r\n    if (token) {\r\n      setAccessToken(token);\r\n      setSnackbarMessage('×”×ª×—×‘×¨×ª ×‘×”×¦×œ×—×”!');\r\n      setShowSnackbar(true);\r\n      window.history.replaceState({}, document.title, \"/\");\r\n    } else {\r\n      // Check if user is already authenticated\r\n      checkAuthStatus();\r\n    }\r\n  }, []);\r\n\r\n  const checkAuthStatus = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:3001/api/user', {\r\n        credentials: 'include'\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setUser(data.user);\r\n        setAccessToken(data.accessToken);\r\n        setSnackbarMessage('×‘×¨×•×š ×”×‘× ×‘×—×–×¨×”!');\r\n        setShowSnackbar(true);\r\n      }\r\n    } catch (error) {\r\n      console.log('Not authenticated:', error);\r\n      // User is not authenticated, show login button\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    chatEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    const script = document.createElement('script');\r\n    script.src = 'https://apis.google.com/js/api.js';\r\n    script.onload = () => window.gapi.load('picker', { 'callback': () => setIsPickerReady(true) });\r\n    document.head.appendChild(script);\r\n  }, []);\r\n\r\n  const fetchUserInfo = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:3001/api/user', {\r\n        credentials: 'include'\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setUser(data.user);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching user info:', error);\r\n    }\r\n  };\r\n\r\n  const handleSessionSelect = async (sessionId) => {\r\n    if (!sessionId) {\r\n      setCurrentSessionId(null);\r\n      setMessages([{ text: '×©×œ×•×! ×× ×™ TLV500 AI Assistant. ×”×ª×—×‘×¨ ×œ×—×©×‘×•×Ÿ Google ×•×‘×—×¨ ×’×™×œ×™×•×Ÿ ×›×“×™ ×œ×”×ª×—×™×œ.', sender: 'assistant', timestamp: new Date(), id: Date.now() }]);\r\n      return;\r\n    }\r\n\r\n    setCurrentSessionId(sessionId);\r\n    \r\n    try {\r\n      const response = await fetch(`http://localhost:3001/api/chat/session/${sessionId}`, {\r\n        credentials: 'include'\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const chatHistory = await response.json();\r\n        const loadedMessages = chatHistory.messages.map(msg => ({\r\n          text: msg.content,\r\n          sender: msg.role === 'user' ? 'user' : 'assistant',\r\n          timestamp: new Date(msg.timestamp),\r\n          id: msg._id || Date.now() + Math.random()\r\n        }));\r\n        \r\n        setMessages(loadedMessages);\r\n        setSidebarTab(1); // Switch to chat history tab\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading chat session:', error);\r\n      setSnackbarMessage('×©×’×™××” ×‘×˜×¢×™× ×ª ×”×©×™×—×”');\r\n      setShowSnackbar(true);\r\n    }\r\n  };\r\n\r\n  const generateSessionId = () => {\r\n    return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\r\n  };\r\n\r\n  function columnIndexToLetter(colIndex) {\r\n    let temp, letter = '';\r\n    let column = colIndex + 1;\r\n    while (column > 0) {\r\n      temp = (column - 1) % 26;\r\n      letter = String.fromCharCode(temp + 65) + letter;\r\n      column = (column - temp - 1) / 26;\r\n    }\r\n    return letter;\r\n  }\r\n\r\n  const renderMessageText = (text) => {\r\n    if (typeof text !== 'string') return text;\r\n\r\n    // Only handle code between backticks, leave everything else as normal text\r\n    const parts = text.split('`');\r\n    \r\n    if (parts.length === 1) {\r\n      // No backticks, return as normal text\r\n      return text;\r\n    }\r\n    \r\n    return parts.map((part, index) => {\r\n      if (index % 2 === 1) {\r\n        // This is code between backticks\r\n        return (\r\n          <Chip\r\n            key={index}\r\n            label={part}\r\n            size=\"small\"\r\n            sx={{\r\n              direction: 'ltr',\r\n              backgroundColor: 'rgba(0,0,0,0.6)',\r\n              color: '#E5E7EB',\r\n              fontFamily: '\"Fira Code\", \"Courier New\", monospace',\r\n              height: 'auto',\r\n              mx: 0.5,\r\n              '& .MuiChip-label': {\r\n                padding: '4px 8px',\r\n                fontSize: '0.85em',\r\n              },\r\n            }}\r\n          />\r\n        );\r\n      } else {\r\n        // Regular text\r\n        return part;\r\n      }\r\n    });\r\n  };\r\n\r\n  function processSheetData(values) {\r\n    const mappedData = {};\r\n    if (!Array.isArray(values)) return mappedData;\r\n    values.forEach((row, rowIndex) => {\r\n      if (row && row.length > 0) {\r\n        row.forEach((cellValue, colIndex) => {\r\n          if (cellValue !== null && cellValue !== '') {\r\n            const cellAddress = columnIndexToLetter(colIndex) + (rowIndex + 1);\r\n            mappedData[cellAddress] = cellValue;\r\n          }\r\n        });\r\n      }\r\n    });\r\n    return mappedData;\r\n  }\r\n  \r\n  const makeGoogleSheetsAPICall = async (spreadsheetId, range, values = null, method = 'GET') => {\r\n    if (!accessToken) throw new Error('No access token available. Please log in.');\r\n    const baseUrl = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}`;\r\n    try {\r\n      let url, options;\r\n      if (method === 'GET') {\r\n        url = `${baseUrl}/values/${range}`;\r\n        options = { method, headers: { 'Authorization': `Bearer ${accessToken}`, 'Content-Type': 'application/json' }};\r\n      } else {\r\n        url = `${baseUrl}/values/${range}?valueInputOption=RAW`;\r\n        options = { method, headers: { 'Authorization': `Bearer ${accessToken}`, 'Content-Type': 'application/json' }, body: JSON.stringify({ values }) };\r\n      }\r\n      const response = await fetch(url, options);\r\n      const data = await response.json();\r\n      if (!response.ok) throw new Error(data.error?.message || 'API call failed');\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Google Sheets API error:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const extractSpreadsheetId = (url) => {\r\n    const match = url.match(/\\/spreadsheets\\/d\\/([a-zA-Z0-9-_]+)/);\r\n    return match ? match[1] : null;\r\n  };\r\n  \r\n  const getSpreadsheetMetadata = async (spreadsheetId) => {\r\n    if (!accessToken) return [];\r\n    try {\r\n      const url = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}`;\r\n      const response = await fetch(url, { headers: { 'Authorization': `Bearer ${accessToken}` } });\r\n      if (!response.ok) throw new Error('Failed to fetch spreadsheet metadata');\r\n      const metadata = await response.json();\r\n      return metadata.sheets.map(sheet => ({ name: sheet.properties.title, id: sheet.properties.sheetId }));\r\n    } catch (error) {\r\n      console.error('Error fetching spreadsheet metadata:', error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async (event, fileType) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    if (file.type === 'application/pdf') {\r\n        // Clean all previous PDF-related state\r\n        setExtractedPdf(null);\r\n        localStorage.removeItem('extractedPdf');\r\n        setIsExtractingData(true);\r\n        \r\n        // Remove any previous PDF-related messages\r\n        setMessages(prev => prev.filter(msg => \r\n            !msg.text.includes('× ×ª×•× ×™× ×—×•×œ×¦×•') && \r\n            !msg.text.includes('×©×’×™××” ×‘×—×™×œ×•×¥') &&\r\n            !msg.text.includes('× ×ª×•× ×™ ×”-PDF × ×•×§×•')\r\n        ));\r\n        \r\n        setMessages(prev => [...prev, { text: `â³ ×ž×—×œ×¥ × ×ª×•× ×™× ×ž×§×•×‘×¥ \"${file.name}\"...`, sender: 'system', timestamp: new Date(), id: Date.now() }]);\r\n        \r\n        const formData = new FormData();\r\n        formData.append('pdf', file);\r\n\r\n        fetch('http://localhost:3001/api/extract-pdf-data', { \r\n            method: 'POST', \r\n            body: formData \r\n        })\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                return response.json().then(err => { throw new Error(err.error || 'Failed to extract data') });\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(result => {\r\n            const pdfInfo = { name: file.name, data: result };\r\n            setExtractedPdf(pdfInfo);\r\n            localStorage.setItem('extractedPdf', JSON.stringify(pdfInfo));\r\n            setMessages(prev => prev.filter(msg => !msg.text.includes('â³ ×ž×—×œ×¥ × ×ª×•× ×™×')));\r\n            setMessages(prev => [...prev, { text: `âœ… × ×ª×•× ×™× ×—×•×œ×¦×• ×‘×”×¦×œ×—×” ×ž-\"${file.name}\". ×›×¢×ª × ×™×ª×Ÿ ×œ×©××•×œ ×©××œ×•×ª ×¢×œ ×”×§×•×‘×¥.`, sender: 'system', timestamp: new Date(), id: Date.now() }]);\r\n        })\r\n        .catch(error => {\r\n            console.error('PDF data extraction failed:', error);\r\n            setMessages(prev => prev.filter(msg => !msg.text.includes('â³ ×ž×—×œ×¥ × ×ª×•× ×™×')));\r\n            setMessages(prev => [...prev, { text: `âŒ ×©×’×™××” ×‘×—×™×œ×•×¥ × ×ª×•× ×™× ×ž-\"${file.name}\": ${error.message}`, sender: 'system', timestamp: new Date(), id: Date.now() }]);\r\n        })\r\n        .finally(() => {\r\n            setIsExtractingData(false);\r\n        });\r\n    } else if (fileType === 'Excel') {\r\n        setExtractedExcel(null);\r\n        localStorage.removeItem('extractedExcel');\r\n        setIsExtractingExcel(true);\r\n        \r\n        setMessages(prev => prev.filter(msg => \r\n            !msg.text.includes('×—×•×œ×¦×• ×ž-Excel') && \r\n            !msg.text.includes('×©×’×™××” ×‘×—×™×œ×•×¥ Excel') &&\r\n            !msg.text.includes('× ×ª×•× ×™ ×”-Excel × ×•×§×•')\r\n        ));\r\n        \r\n        setMessages(prev => [...prev, { text: `â³ ×ž×—×œ×¥ × ×ª×•× ×™× ×ž×§×•×‘×¥ Excel \"${file.name}\"...`, sender: 'system', timestamp: new Date(), id: Date.now() }]);\r\n        \r\n        const formData = new FormData();\r\n        formData.append('excel', file);\r\n\r\n        fetch('http://localhost:3001/api/extract-excel-data', { \r\n            method: 'POST', \r\n            body: formData \r\n        })\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                return response.json().then(err => { throw new Error(err.error || 'Failed to extract Excel data') });\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(result => {\r\n            const excelInfo = { name: file.name, data: result.data };\r\n            setExtractedExcel(excelInfo);\r\n            localStorage.setItem('extractedExcel', JSON.stringify(excelInfo));\r\n            setMessages(prev => prev.filter(msg => !msg.text.includes('â³ ×ž×—×œ×¥ × ×ª×•× ×™× ×ž×§×•×‘×¥ Excel')));\r\n            setMessages(prev => [...prev, { text: `âœ… × ×ª×•× ×™× ×—×•×œ×¦×• ×‘×”×¦×œ×—×” ×ž-Excel \"${file.name}\".`, sender: 'system', timestamp: new Date(), id: Date.now() }]);\r\n        })\r\n        .catch(error => {\r\n            console.error('Excel data extraction failed:', error);\r\n            setMessages(prev => prev.filter(msg => !msg.text.includes('â³ ×ž×—×œ×¥ × ×ª×•× ×™× ×ž×§×•×‘×¥ Excel')));\r\n            setMessages(prev => [...prev, { text: `âŒ ×©×’×™××” ×‘×—×™×œ×•×¥ × ×ª×•× ×™ Excel: ${error.message}`, sender: 'system', timestamp: new Date(), id: Date.now() }]);\r\n        })\r\n        .finally(() => {\r\n            setIsExtractingExcel(false);\r\n        });\r\n    }\r\n  };\r\n\r\n  const loadAvailableSheets = async (spreadsheetId) => {\r\n    setIsLoadingSheets(true);\r\n    try {\r\n      const sheets = await getSpreadsheetMetadata(spreadsheetId);\r\n      setAvailableSheets(sheets);\r\n      if (sheets.length > 0) {\r\n        setSelectedSheetName(sheets[0].name);\r\n        setSheetsMetadata(sheets);\r\n        await getSheetData(spreadsheetId, sheets[0].name);\r\n        setMessages(prev => [...prev, { text: `ðŸ” ×’×œ×™×•×Ÿ ×¤×¢×™×œ: ${sheets[0]?.name || '×œ× ×™×“×•×¢'}`, sender: 'system', timestamp: new Date(), id: Date.now() }]);\r\n      }\r\n    } finally {\r\n      setIsLoadingSheets(false);\r\n    }\r\n  };\r\n\r\n  const handleGoogleSheetsUrl = async (url) => {\r\n    setGoogleSheetsUrl(url);\r\n    setIsSheetLoaded(true);\r\n    const spreadsheetId = extractSpreadsheetId(url);\r\n    if (spreadsheetId && accessToken) await loadAvailableSheets(spreadsheetId);\r\n  };\r\n  \r\n  const handleSheetChange = async (newSheetName) => {\r\n    if (newSheetName === selectedSheetName) return;\r\n    setSelectedSheetName(newSheetName);\r\n    const spreadsheetId = extractSpreadsheetId(googleSheetsUrl);\r\n    if (spreadsheetId) {\r\n      await getSheetData(spreadsheetId, newSheetName);\r\n      setMessages(prev => [...prev, { text: `ðŸ“‹ ×”×•×—×œ×£ ×œ×’×œ×™×•×Ÿ: ${newSheetName}`, sender: 'system', timestamp: new Date(), id: Date.now() }]);\r\n    }\r\n  };\r\n\r\n  const pickerCallback = (data) => {\r\n    if (data.action === window.google.picker.Action.PICKED) {\r\n      const doc = data.docs[0];\r\n      setFileName(doc.name);\r\n      handleGoogleSheetsUrl(doc.url);\r\n      setSnackbarMessage(`×˜×¢×Ÿ ×’×™×œ×™×•×Ÿ: ${doc.name}`);\r\n      setShowSnackbar(true);\r\n    }\r\n  };\r\n\r\n  const createPicker = () => {\r\n    const developerKey = process.env.REACT_APP_GEMINI_API_KEY;\r\n    const clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID;\r\n    if (!clientId || !developerKey) {\r\n      setAuthError('×ž×¤×ª×—×•×ª API ××™× × ×ž×•×’×“×¨×™× ×›×¨××•×™.');\r\n      setShowSnackbar(true);\r\n      return;\r\n    }\r\n    const view = new window.google.picker.View(window.google.picker.ViewId.SPREADSHEETS);\r\n    view.setMimeTypes(\"application/vnd.google-apps.spreadsheet\");\r\n    const picker = new window.google.picker.PickerBuilder()\r\n      .setAppId(clientId.split('-')[0])\r\n      .setOAuthToken(accessToken)\r\n      .setDeveloperKey(developerKey)\r\n      .addView(view)\r\n      .setCallback(pickerCallback)\r\n      .build();\r\n    picker.setVisible(true);\r\n  };\r\n\r\n  const getSheetData = async (spreadsheetId, sheetName = null) => {\r\n    if (!accessToken) return null;\r\n    try {\r\n      const range = sheetName ? `'${sheetName}'!A1:Z1000` : 'A1:Z1000';\r\n      const apiResponse = await makeGoogleSheetsAPICall(spreadsheetId, range);\r\n      // The processSheetData function is removed as we will send raw data to backend\r\n      return apiResponse.values || [];\r\n    } catch (error) {\r\n      console.error('Failed to fetch sheet data:', error);\r\n      setMessages(prev => [...prev, { text: `âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×’×™×œ×™×•×Ÿ: ${error.message}`, sender: 'system', timestamp: new Date(), id: Date.now() }]);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const sendMessage = async () => {\r\n    if (!question.trim() || isStreamingResponse) return;\r\n\r\n    const currentQuestion = question;\r\n    const userMessage = { text: currentQuestion, sender: 'user', timestamp: new Date(), id: Date.now() };\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setQuestion('');\r\n    setIsStreamingResponse(true);\r\n    \r\n    // Generate session ID if this is a new conversation\r\n    let sessionId = currentSessionId;\r\n    if (!sessionId) {\r\n      sessionId = generateSessionId();\r\n      setCurrentSessionId(sessionId);\r\n    }\r\n    \r\n    const loadingMessageId = Date.now() + 1;\r\n    setMessages(prev => [...prev, { text: '', sender: 'assistant', isLoading: true, timestamp: new Date(), id: loadingMessageId }]);\r\n\r\n    try {\r\n        const sheetData = isSheetLoaded ? await getSheetData(extractSpreadsheetId(googleSheetsUrl), selectedSheetName) : null;\r\n        \r\n        // We need to get the spreadsheetId here to send it\r\n        const spreadsheetId = isSheetLoaded ? extractSpreadsheetId(googleSheetsUrl) : null;\r\n\r\n        const payload = {\r\n          question: currentQuestion,\r\n          sheetData: sheetData,\r\n          extractedPdfData: extractedPdf ? extractedPdf.data : null,\r\n          extractedExcelData: extractedExcel ? extractedExcel.data : null,\r\n          isAgentMode: isAgentMode,\r\n          conversationHistory: messages.filter(m => !m.isLoading).map(m => ({\r\n              role: m.sender === 'user' ? 'user' : 'model',\r\n              parts: [{ text: m.text }]\r\n          })),\r\n          spreadsheetId: spreadsheetId,\r\n          accessToken: accessToken,\r\n          sessionId: sessionId,  // Include session ID\r\n          sheetsMetadata: sheetsMetadata,       // ×•×“× ×©×”×ž×©×ª× ×” ×”×–×” ×§×™×™× ×•×ž×›×™×œ ××ª ×”×ž×™×“×¢\r\n          selectedSheetName: selectedSheetName  // ×•×“× ×©×”×ž×©×ª× ×” ×”×–×” ×§×™×™× ×•×ž×›×™×œ ××ª ×©× ×”×’×™×œ×™×•×Ÿ\r\n        };\r\n    \r\n        \r\n        const response = await fetch('http://localhost:3001/api/chat-stream', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(payload),\r\n        });\r\n\r\n        if (!response.ok || !response.body) {\r\n            const errorText = await response.text();\r\n            throw new Error(`Server error: ${response.status} ${errorText}`);\r\n        }\r\n\r\n        const reader = response.body.getReader();\r\n        const decoder = new TextDecoder();\r\n        let accumulatedResponse = '';\r\n\r\n        while (true) {\r\n            const { value, done } = await reader.read();\r\n            if (done) break;\r\n            \r\n            accumulatedResponse += decoder.decode(value, { stream: true });\r\n\r\n            setMessages(prev => prev.map(m => {\r\n                if (m.id === loadingMessageId) {\r\n                    // Show the accumulated response directly as text\r\n                    return { ...m, text: accumulatedResponse, isLoading: true };\r\n                }\r\n                return m;\r\n            }));\r\n        }\r\n\r\n        // Final response processing - just show the accumulated text\r\n        setMessages(prev => prev.map(m => \r\n            m.id === loadingMessageId \r\n            ? { ...m, text: accumulatedResponse, isLoading: false } \r\n            : m\r\n        ));\r\n\r\n    } catch (error) {\r\n        console.error('Error in sendMessage:', error);\r\n        setMessages(prev => prev.map(m => \r\n            m.id === loadingMessageId \r\n            ? { ...m, text: `××™×¨×¢×” ×©×’×™××”: ${error.message}`, isLoading: false, isError: true } \r\n            : m\r\n        ));\r\n    } finally {\r\n        setIsStreamingResponse(false);\r\n    }\r\n  };\r\n\r\n  const saveAllChanges = () => {\r\n    setMessages(prev => [...prev, { text: `ðŸ’¾ ×›×œ ×”×©×™× ×•×™×™× × ×©×ž×¨×• ×œ×’×™×œ×™×•×Ÿ ${fileName}`, sender: 'system', timestamp: new Date(), id: Date.now() }]);\r\n  };\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <CssBaseline />\r\n      <Box sx={{ display: 'flex', height: '100vh', bgcolor: 'background.default', overflow: 'hidden' }}>\r\n        <Box sx={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: `radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.08) 0%, transparent 60%), radial-gradient(circle at 80% 70%, rgba(99, 102, 241, 0.06) 0%, transparent 60%)`, pointerEvents: 'none', zIndex: 0 }} />\r\n        {!isMobile && (\r\n          <Drawer variant=\"permanent\" sx={{ width: drawerWidth, flexShrink: 0, zIndex: 1, '& .MuiDrawer-paper': { width: drawerWidth, boxSizing: 'border-box', bgcolor: 'rgba(10, 10, 10, 0.98)', borderRight: '1px solid rgba(139, 92, 246, 0.4)', backdropFilter: 'blur(20px)' }}}>\r\n            <Box sx={{ p: 3 }}>\r\n              <Typography variant=\"h6\" sx={{ background: 'linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)', backgroundClip: 'text', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', fontWeight: 700 }}>TLV500</Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">AI Assistant</Typography>\r\n            </Box>\r\n            <Divider sx={{ borderColor: 'rgba(139, 92, 246, 0.4)' }} />\r\n            <Box sx={{ p: 3, display: 'flex', alignItems: 'center', gap: 2 }}>\r\n              <Avatar\r\n                src={user?.profilePicture}\r\n                sx={{ width: 45, height: 45, background: 'linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)' }}\r\n              >\r\n                {user?.name ? user.name.charAt(0) : <Person />}\r\n              </Avatar>\r\n              <Box>\r\n                <Typography variant=\"body2\" fontWeight={600}>\r\n                  {user?.name || '×ž×©×ª×ž×© ××•×¨×—'}\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  {user?.email || '×œ× ×ž×—×•×‘×¨'}\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n            <Divider sx={{ borderColor: 'rgba(139, 92, 246, 0.4)' }} />\r\n            \r\n            {/* Tabs for Projects and Chat History */}\r\n            <Tabs\r\n              value={sidebarTab}\r\n              onChange={(e, newValue) => setSidebarTab(newValue)}\r\n              variant=\"fullWidth\"\r\n              sx={{\r\n                borderBottom: '1px solid rgba(139, 92, 246, 0.4)',\r\n                '& .MuiTab-root': {\r\n                  color: 'text.secondary',\r\n                  minHeight: 48,\r\n                  '&.Mui-selected': { color: 'primary.main' }\r\n                }\r\n              }}\r\n            >\r\n              <Tab icon={<Work />} label=\"×¤×¨×•×™×§×˜×™×\" />\r\n              <Tab icon={<History />} label=\"×©×™×—×•×ª\" />\r\n            </Tabs>\r\n\r\n            {/* Tab Content */}\r\n            <Box sx={{ flexGrow: 1, overflow: 'hidden' }}>\r\n              {sidebarTab === 0 && (\r\n                <Box sx={{ p: 3 }}>\r\n                  <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom fontWeight={600}>×¤×¨×•×™×§×˜×™× ××—×¨×•× ×™×</Typography>\r\n                  <List dense>\r\n                    {projects.map((project, index) => (\r\n                      <ListItem key={index} sx={{ px: 0, py: 1, borderRadius: 2, mb: 1, '&:hover': { bgcolor: 'rgba(139, 92, 246, 0.15)', transform: 'translateX(4px)' }}}>\r\n                        <ListItemIcon sx={{ minWidth: 36 }}><Folder sx={{ color: 'primary.main', fontSize: 20 }} /></ListItemIcon>\r\n                        <ListItemText primary={project.name} secondary={project.lastModified} primaryTypographyProps={{ variant: 'body2', fontWeight: 500 }} secondaryTypographyProps={{ variant: 'caption' }} />\r\n                        <Chip label={project.status} size=\"small\" color={project.status === '×¤×¢×™×œ' ? 'primary' : 'default'} sx={{ fontSize: '0.65rem', fontWeight: 600 }} />\r\n                      </ListItem>\r\n                    ))}\r\n                  </List>\r\n                </Box>\r\n              )}\r\n              \r\n              {sidebarTab === 1 && (\r\n                <ChatHistory\r\n                  accessToken={accessToken}\r\n                  onSessionSelect={handleSessionSelect}\r\n                  currentSessionId={currentSessionId}\r\n                />\r\n              )}\r\n            </Box>\r\n          </Drawer>\r\n        )}\r\n        <Box sx={{ flexGrow: 1, display: 'flex', flexDirection: isMobile ? 'column' : 'row', zIndex: 1, height: '100vh', overflow: 'hidden' }}>\r\n          <Box sx={{ flex: isMobile ? '1 1 60%' : '0 0 65%', p: 2, display: 'flex', flexDirection: 'column', height: '100%', overflow: 'hidden' }}>\r\n            <Box sx={{ mb: 2, display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', gap: 2 }}>\r\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\r\n                <Typography variant=\"h6\" fontWeight={600} color=\"text.primary\">{fileName || '×œ× × ×‘×—×¨ ×’×™×œ×™×•×Ÿ'}</Typography>\r\n                {availableSheets.length > 1 && (\r\n                  <FormControl size=\"small\" sx={{ minWidth: 180 }}>\r\n                    <InputLabel sx={{ color: 'text.secondary' }}>×‘×—×¨ ×’×œ×™×•×Ÿ</InputLabel>\r\n                    <Select value={selectedSheetName} label=\"×‘×—×¨ ×’×œ×™×•×Ÿ\" onChange={(e) => handleSheetChange(e.target.value)} disabled={isLoadingSheets} sx={{ '& .MuiOutlinedInput-notchedOutline': { borderColor: 'rgba(139, 92, 246, 0.5)' } }}>\r\n                      {availableSheets.map(sheet => (<MenuItem key={sheet.id} value={sheet.name}>{sheet.name}</MenuItem>))}\r\n                    </Select>\r\n                  </FormControl>\r\n                )}\r\n                {isLoadingSheets && <CircularProgress size={20} sx={{ color: 'primary.main' }} />}\r\n              </Box>\r\n              {!accessToken ? (\r\n                <Button variant=\"contained\" href=\"http://localhost:3001\">×”×ª×—×‘×¨ ×¢× Google</Button>\r\n              ) : (\r\n                <Button variant=\"outlined\" onClick={createPicker} disabled={!isPickerReady}>\r\n                  {!isPickerReady ? '×˜×•×¢×Ÿ API...' : '×‘×—×¨ ×’×™×œ×™×•×Ÿ ×ž-Drive'}\r\n                </Button>\r\n              )}\r\n              {changesCount > 0 && <Chip label={`${changesCount} ×©×™× ×•×™×™× ×œ× ×©×ž×•×¨×™×`} size=\"small\" color=\"warning\" />}\r\n              <Button variant=\"contained\" startIcon={<Save />} onClick={saveAllChanges} color=\"primary\" size=\"small\">×©×ž×•×¨ ×”×›×œ</Button>\r\n            </Box>\r\n            <Paper sx={{ flexGrow: 1, p: 2, display: 'flex', flexDirection: 'column', overflow: 'hidden', background: 'rgba(15, 15, 15, 0.98)', border: '1px solid rgba(139, 92, 246, 0.25)' }}>\r\n              <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\r\n                <Typography variant=\"subtitle1\" fontWeight={600}>×’×™×œ×™×•×Ÿ ×¢×‘×•×“×”</Typography>\r\n                {!isSheetLoaded && (\r\n                  <TextField placeholder=\"×”×›× ×¡ ×§×™×©×•×¨ ×œ×’×•×’×œ ×©×™×˜×¡...\" size=\"small\" sx={{ minWidth: 300 }} onKeyPress={async (e) => { if (e.key === 'Enter' && e.target.value) { await handleGoogleSheetsUrl(e.target.value); e.target.value = ''; } }} />\r\n                )}\r\n              </Box>\r\n              <Box sx={{ flexGrow: 1, border: '1px solid rgba(139, 92, 246, 0.4)', borderRadius: 1, bgcolor: 'rgba(5, 5, 5, 0.8)', position: 'relative', overflow: 'hidden' }}>\r\n                {isSheetLoaded ? (\r\n                  <iframe src={googleSheetsUrl} width=\"100%\" height=\"100%\" style={{ border: 'none', borderRadius: '4px' }} title=\"Google Sheets\" />\r\n                ) : (\r\n                  <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', height: '100%', color: 'text.secondary' }}>\r\n                    <TableChart sx={{ fontSize: 60, mb: 2, opacity: 0.5 }} />\r\n                    <Typography variant=\"h6\" gutterBottom>×˜×¢×Ÿ ×’×™×œ×™×•×Ÿ ×’×•×’×œ ×©×™×˜×¡</Typography>\r\n                    <Typography variant=\"body2\" textAlign=\"center\" sx={{ maxWidth: 400 }}>×”×›× ×¡ ×§×™×©×•×¨ ×œ×’×•×’×œ ×©×™×˜×¡ ×‘×©×“×” ×œ×ž×¢×œ×”</Typography>\r\n                  </Box>\r\n                )}\r\n              </Box>\r\n            </Paper>\r\n          </Box>\r\n          <Box sx={{ width: isMobile ? '100%' : '35%', flex: isMobile ? '1 1 40%' : '0 0 35%', p: 2, height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n            <Paper sx={{ flexGrow: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden', background: 'rgba(25, 25, 25, 0.98)', border: '1px solid rgba(139, 92, 246, 0.25)' }}>\r\n              <Box sx={{ p: 2, borderBottom: '1px solid rgba(139, 92, 246, 0.4)' }}>\r\n                <Typography variant=\"h6\" fontWeight={600}>×¢×•×–×¨ AI</Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\">×ž×•×›×Ÿ ×œ×¢×–×•×¨ ×¢× ×”× ×™×ª×•×— ×©×œ×š</Typography>\r\n              </Box>\r\n              <Box sx={{ p: 2, borderBottom: '1px solid rgba(139, 92, 246, 0.4)' }}>\r\n                <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n                  <Box sx={{ display: 'flex', gap: 1 }}>\r\n                    <Button variant=\"outlined\" component=\"label\" startIcon={<Description />} size=\"small\" disabled={isExtractingData} sx={{ flex: 1, borderColor: 'rgba(139, 92, 246, 0.5)', '&.Mui-disabled': { color: 'text.secondary' } }}>\r\n                      {isExtractingData ? '×ž×¢×‘×“...' : 'PDF'}\r\n                      <input type=\"file\" hidden accept=\".pdf\" onChange={(e) => handleFileUpload(e, 'PDF')} disabled={isExtractingData} />\r\n                    </Button>\r\n                    <Button variant=\"outlined\" component=\"label\" startIcon={<TableChart />} size=\"small\" disabled={isExtractingExcel} sx={{ flex: 1, borderColor: 'rgba(139, 92, 246, 0.5)' }}>\r\n                      {isExtractingExcel ? '×ž×¢×‘×“...' : 'Excel'}\r\n                      <input type=\"file\" hidden accept=\".xlsx,.xls,.csv\" onChange={(e) => handleFileUpload(e, 'Excel')} disabled={isExtractingExcel}/>\r\n                    </Button>\r\n                  </Box>\r\n                  {extractedPdf && (\r\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mt: 1, p: 1, bgcolor: 'rgba(139, 92, 246, 0.1)', borderRadius: 2, border: '1px solid rgba(139, 92, 246, 0.3)' }}>\r\n                      <Description sx={{ color: 'primary.main', fontSize: 20 }} />\r\n                      <Typography variant=\"body2\" sx={{ flex: 1, whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>{extractedPdf.name}</Typography>\r\n                      <Button size=\"small\" onClick={() => { setExtractedPdf(null); localStorage.removeItem('extractedPdf'); setMessages(prev => [...prev, { text: 'ðŸ“„ × ×ª×•× ×™ ×”-PDF × ×•×§×• ×ž×”×”×§×©×¨.', sender: 'system', timestamp: new Date(), id: Date.now() }]); }} sx={{ color: 'error.main', minWidth: 'auto', p: 0.5 }}>âœ•</Button>\r\n                    </Box>\r\n                  )}\r\n                  {extractedExcel && (\r\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mt: 1, p: 1, bgcolor: 'rgba(16, 185, 129, 0.1)', borderRadius: 2, border: '1px solid rgba(16, 185, 129, 0.3)' }}>\r\n                        <TableChart sx={{ color: 'success.main', fontSize: 20 }} />\r\n                        <Typography variant=\"body2\" sx={{ flex: 1, whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>{extractedExcel.name}</Typography>\r\n                        <Button size=\"small\" onClick={() => { setExtractedExcel(null); localStorage.removeItem('extractedExcel'); setMessages(prev => [...prev, { text: 'ðŸ“Š × ×ª×•× ×™ ×”-Excel × ×•×§×• ×ž×”×”×§×©×¨.', sender: 'system', timestamp: new Date(), id: Date.now() }]); }} sx={{ color: 'error.main', minWidth: 'auto', p: 0.5 }}>âœ•</Button>\r\n                    </Box>\r\n                  )}\r\n                </Box>\r\n              </Box>\r\n              <Box sx={{ flexGrow: 1, overflow: 'auto', p: 2 }}>\r\n                {messages.map((msg, index) => (\r\n                  <Box key={msg.id || index} sx={{ mb: 2 }} className=\"chat-message\">\r\n                    <Box sx={{ display: 'flex', justifyContent: msg.sender === 'user' ? 'flex-end' : 'flex-start', mb: 1 }}>\r\n                      <Paper sx={{ \r\n                        p: 1.5, \r\n                        maxWidth: '85%', \r\n                        background: msg.sender === 'user' ? 'linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)' : 'rgba(35, 35, 35, 0.9)', \r\n                        color: 'white', \r\n                        borderRadius: 3\r\n                      }}>\r\n                        {msg.isLoading ? <CircularProgress size={16} color=\"inherit\" /> : <Typography variant=\"body2\" sx={{ whiteSpace: 'pre-wrap' }}>{msg.text}</Typography>}\r\n                      </Paper>\r\n                    </Box>\r\n                    <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', textAlign: msg.sender === 'user' ? 'right' : 'left', px: 1 }}>\r\n                      {msg.timestamp.toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' })}\r\n                    </Typography>\r\n                  </Box>\r\n                ))}\r\n                <div ref={chatEndRef} />\r\n              </Box>\r\n              <Box sx={{ p: 2, borderTop: '1px solid rgba(139, 92, 246, 0.4)' }}>\r\n                <Box sx={{ display: 'flex', gap: 1 }}>\r\n                  <TextField \r\n                    fullWidth \r\n                    variant=\"outlined\" \r\n                    placeholder=\"×©××œ ××•×ª×™ ×›×œ ×“×‘×¨... (Shift+Enter ×œ×©×•×¨×” ×—×“×©×”)\" \r\n                    value={question} \r\n                    onChange={(e) => setQuestion(e.target.value)} \r\n                    onKeyPress={(e) => {\r\n                      if (e.key === 'Enter' && !e.shiftKey) {\r\n                        e.preventDefault(); // Prevents adding a new line\r\n                        sendMessage();\r\n                      }\r\n                    }} \r\n                    multiline\r\n                    minRows={2}\r\n                    maxRows={5}\r\n                    sx={{\r\n                      direction: 'rtl',\r\n                      '& .MuiOutlinedInput-root': {\r\n                        borderRadius: 3,\r\n                        direction: 'rtl',\r\n                        '& textarea': {\r\n                          textAlign: 'right',\r\n                          direction: 'rtl',\r\n                        },\r\n                        '& input': {\r\n                          textAlign: 'right',\r\n                          direction: 'rtl',\r\n                        },\r\n                      },\r\n                      '& .MuiInputLabel-root': {\r\n                        right: 'auto',\r\n                        left: 0,\r\n                        transformOrigin: 'top right',\r\n                        direction: 'rtl',\r\n                      },\r\n                      '& .MuiFormLabel-root': {\r\n                        textAlign: 'right',\r\n                        direction: 'rtl',\r\n                      },\r\n                    }}\r\n                  />\r\n                  <Fab color=\"primary\" onClick={sendMessage} size=\"small\"><Send /></Fab>\r\n                </Box>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      checked={isAgentMode}\r\n                      onChange={(e) => setIsAgentMode(e.target.checked)}\r\n                      disabled={!googleSheetsUrl}\r\n                    />\r\n                  }\r\n                  label=\"Agent Mode: Allow Sheet Editing\"\r\n                  sx={{ \r\n                    color: !googleSheetsUrl ? 'text.disabled' : 'text.secondary', \r\n                    mt: 1, \r\n                    mr: 0 \r\n                  }}\r\n                />\r\n              </Box>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n        <Snackbar open={showSnackbar} autoHideDuration={6000} onClose={() => setShowSnackbar(false)} anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }} sx={{ bottom: { xs: 90, sm: 24 } }}>\r\n          <Alert onClose={() => setShowSnackbar(false)} severity={authError ? \"error\" : \"success\"} sx={{ width: '100%', bgcolor: '#2E2E2E', color: 'white' }}>\r\n            {snackbarMessage || authError}\r\n          </Alert>\r\n        </Snackbar>\r\n      </Box>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}